<section id="main">
<div id="page">
<div class="topic_content">
<article>
<div style="text-align:right">
<div style="text-align:right">
Versions 
  
    
    | <a href="/v1.0/articles/in_syslog">v1.0 (td-agent3)</a>
    
  

  

  
    
    | <b><i>v0.12</i> (td-agent2)<b>
</b></b>
</div>
</div>
<hr size="1" style="margin-top: 10px; margin-bottom: 10px; color: rgba(0, 0, 0, .15);"/>
<hgroup>
<h1>syslog Input Plugin</h1>
</hgroup>
<p>The <code>in_syslog</code> Input plugin enables Fluentd to retrieve records via the syslog protocol on UDP or TCP.</p>
<a name="example-configuration"></a>
<section id="table-of-contents"><h3>Table of Contents</h3>
<ul id="toc">
<li class="toc-item"><a href="#example-configuration">Example Configuration</a></li>
<ul class="sub-toc">
<li class="sub-toc-item"><a href="#example-usage">Example Usage</a></li>
</ul>
<li class="toc-item"><a href="#parameters">Parameters</a></li>
<ul class="sub-toc">
<li class="sub-toc-item"><a href="#@type-(required)">@type (required)</a></li>
<li class="sub-toc-item"><a href="#tag-(required)">tag (required)</a></li>
<li class="sub-toc-item"><a href="#port">port</a></li>
<li class="sub-toc-item"><a href="#bind">bind</a></li>
<li class="sub-toc-item"><a href="#protocol_type">protocol_type</a></li>
<li class="sub-toc-item"><a href="#message_length_limit">message_length_limit</a></li>
<li class="sub-toc-item"><a href="#message_format">message_format</a></li>
<li class="sub-toc-item"><a href="#format">format</a></li>
<li class="sub-toc-item"><a href="#with_priority">with_priority</a></li>
<li class="sub-toc-item"><a href="#include_source_host">include_source_host</a></li>
<li class="sub-toc-item"><a href="#source_hostname_key">source_hostname_key</a></li>
<li class="sub-toc-item"><a href="#priority_key">priority_key</a></li>
<li class="sub-toc-item"><a href="#facility_key">facility_key</a></li>
</ul>
<li class="toc-item"><a href="#tcp-protocol-and-message-delimiter">TCP protocol and message delimiter</a></li>
</ul>
</section>
<h2>Example Configuration</h2>
<p><code>in_syslog</code> is included in Fluentd’s core. No additional installation process is required.</p>
<pre class="CodeRay">&lt;source&gt;
  @type syslog
  port 5140
  bind 0.0.0.0
  tag system
&lt;/source&gt;
</pre>
<table class="note">
<td class="icon"></td>
<td class="content">Please see the <a href="config-file">Config File</a> article for the basic structure and syntax of the configuration file.</td>
</table>
<a name="example-usage"></a><h3>Example Usage</h3>
<p>The retrieved data is organized as follows. Fluentd’s tag is generated by the <code>tag</code> parameter (tag prefix), <a href="http://en.wikipedia.org/wiki/Syslog#Facility_Levels">facility level</a>, and <a href="http://en.wikipedia.org/wiki/Syslog#Severity_levels">priority</a>. The record is parsed by the regexp <a href="https://github.com/fluent/fluentd/blob/master/lib/fluent/plugin/in_syslog.rb#L25">here</a>.</p>
<pre class="CodeRay">tag = "#{@tag}.#{facility}.#{priority}"

record = {
  "pri": "0",
  "time": 1353436518,
  "host": "host",
  "ident": "ident",
  "pid": "12345",
  "message": "text"
}
</pre>
<a name="parameters"></a><h2>Parameters</h2>
<a name="@type-(required)"></a><h3>@type (required)</h3>
<p>The value must be <code>syslog</code>.</p>
<a name="tag-(required)"></a><h3>tag (required)</h3>
<p>The prefix of the tag. The tag itself is generated by the tag prefix, <a href="http://en.wikipedia.org/wiki/Syslog#Facility_Levels">facility level</a>, and <a href="http://en.wikipedia.org/wiki/Syslog#Severity_levels">priority</a>.</p>
<a name="port"></a><h3>port</h3>
<p>The port to listen to. Default Value = 5140</p>
<a name="bind"></a><h3>bind</h3>
<p>The bind address to listen to. Default Value = 0.0.0.0 (all addresses)</p>
<a name="protocol_type"></a><h3>protocol_type</h3>
<p>The transport protocol used to receive logs. “udp” and “tcp” are supported. “udp” by default.</p>
<a name="message_length_limit"></a><h3>message_length_limit</h3>
<p>The max bytes of syslog message. Default is <code>2048</code>. If you send larger message, change this parameter.</p>
<a name="message_format"></a><h3>message_format</h3>
<p>This parameter is available since v0.12.33.</p>
<p>Specify protocol format. Supported values are <code>rfc3164</code>, <code>rfc5424</code> and <code>auto</code>. Default is <code>rfc3164</code>. If your syslog uses <code>rfc5424</code>, use <code>rfc5424</code> instead.<br/>
Here is an example of message:</p>
<pre class="CodeRay"># rfc3164
&lt;6&gt;Feb 28 12:00:00 192.168.0.1 fluentd[11111]: [error] Hello!
# rfc5424
&lt;16&gt;1 2017-02-28T12:00:00.009Z 192.168.0.1 fluentd - - - Hello!
</pre>
<p><code>auto</code> is useful when <code>in_syslog</code> receives both <code>rfc3164</code> and <code>rfc5424</code> message per source. <code>in_syslog</code> detects message format by using message prefix and parse it.</p>
<a name="format"></a><h3>format</h3>
<p>The format of the log. This option is used to parse non-standard syslog formats using <a href="parser-plugin-overview">parser plugins</a>.</p>
<pre class="CodeRay">&lt;source&gt;
  @type syslog
  tag system
  format FORMAT_PARAMETER
&lt;/source&gt;
</pre>
<p>Your <code>format</code> regexp should not consider the ‘priority’ prefix of the log.
For example, if in_syslog receives the log below:</p>
<pre class="CodeRay"> &lt;1&gt;Feb 20 00:00:00 192.168.0.1 fluentd[11111]: [error] hogehoge
</pre>
<p>then the format parser receives the following log:</p>
<pre class="CodeRay"> Feb 20 00:00:00 192.168.0.1 fluentd[11111]: [error] hogehoge
</pre>
<p>If the <code>format</code> parameter is missing, then the log data is assumed to have the canonical syslog format (see with_priority).</p>
<a name="with_priority"></a><h3>with_priority</h3>
<p>This option matters only when <code>format</code> is absent. If <code>with_priority</code> is true, then syslog messages are assumed to be prefixed with a priority tag like “&lt;3&gt;”. This option exists since some syslog daemons output logs without the priority tag preceding the message body.</p>
<table class="note">
<td class="icon"></td>
<td class="content">If you wish to parse syslog messages of arbitrary formats, <a href="in_tcp">in_tcp</a> or <a href="in_udp">in_udp</a> are recommended.</td>
</table>
<a name="include_source_host"></a><h3>include_source_host</h3>
<p>If true, add source host to event record. The default is <code>false</code>. This is deprecated. Use <code>source_hostname_key</code>.</p>
<a name="source_hostname_key"></a><h3>source_hostname_key</h3>
<p>The field name of the client’s hostname. If set the value, the client’s hostname will be set to its key. The default is nil (no adding hostname).</p>
<a name="priority_key"></a><h3>priority_key</h3>
<p>The field name of the priority. If set the value, the priority will be set to its key. The default is nil (no adding priority).</p>
<a name="facility_key"></a><h3>facility_key</h3>
<p>The field name of the facility. If set the value, the facility will be set to its key. The default is nil (no adding facility).</p>
<h4>log_level option</h4>
<p>The <code>log_level</code> option allows the user to set different levels of logging for each plugin. The supported log levels are: <code>fatal</code>, <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug</code>, and <code>trace</code>.</p>
<p>Please see the <a href="logging">logging article</a> for further details.</p>
<a name="tcp-protocol-and-message-delimiter"></a><h2>TCP protocol and message delimiter</h2>
<p>This plugin assumes <code>\n</code> for delimiter character between syslog messages in one TCP connection. If you use syslog library in your application with <code>protocol_type tcp</code>, add <code>\n</code> to your syslog message.<br/>
See also <a href="https://tools.ietf.org/html/rfc6587#section-3.4.2">rfc6587</a>.</p>
<div style="text-align:right">
  Last updated: 2017-03-22 14:37:02 UTC
  </div>
<hr size="1" style="margin-top: 10px; margin-bottom: 10px; color: rgba(0, 0, 0, .15);"/>
<div style="text-align:right">
Versions 
  
    
    | <a href="/v1.0/articles/in_syslog">v1.0 (td-agent3)</a>
    
  

  

  
    
    | <b><i>v0.12</i> (td-agent2)<b>
</b></b>
</div>
<hr size="1" style="margin-top: 10px; margin-bottom: 10px; color: rgba(0, 0, 0, .15);"/>
<p>
    If this article is incorrect or outdated, or omits critical information, please <a href="https://github.com/fluent/fluentd-docs/issues?state=open">let us know</a>. <a href="http://www.fluentd.org/">Fluentd</a> is a  open source project under <a href="https://cncf.io/">Cloud Native Computing Foundation (CNCF)</a>. All components are available under the Apache 2 License.
  </p>
</article>
</div>
<!-- /#topic_content -->
</div>
<!-- /#page -->
</section>